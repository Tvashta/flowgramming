<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
        />
        <title>Contest Page</title>
        <link
            rel="stylesheet"
            href="../assets/bootstrap/css/bootstrap.min.css"
        />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700,700i,600,600i"
        />
        <link rel="stylesheet" href="../assets/fonts/ionicons.min.css" />
        <link rel="stylesheet" href="../css/Contact-Form-Clean.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.css"
        />
        <link rel="stylesheet" href="../css/Login-Form-Clean.css" />
        <link rel="stylesheet" href="../css/vanilla-zoom.min.css" />
        <link rel="stylesheet" href="../css/app.css" />
    </head>

    <body>
        <nav
            class="navbar navbar-light navbar-expand-lg fixed-top bg-white clean-navbar"
        >
            <div class="container">
                <a class="navbar-brand logo" href="#">Flowgramming</a
                ><button
                    data-bs-toggle="collapse"
                    class="navbar-toggler"
                    data-bs-target="#navcol-1"
                >
                    <span class="visually-hidden">Toggle navigation</span
                    ><span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navcol-1">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="landing.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="problems.html"
                                >Problems</a
                            >
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="contests.html"
                                >Contest Page</a
                            >
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="login.html">LOGIN</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="profile.html">PROFILE</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
<div class="container contest-details">
  <div class="container p-4 information">
    <div id='contest'></div>
    <br>
    <button class="btn btn-info float-md-right">Join Contest</button>
    <br>
    <br>
    <h3>Rankings</h3>
    <div class="container w-100 align-content-center" id="rankings-info-div">
      Enter Contest to view rankings
    </div>
  </div>
  <div class="container metadata">

  </div>
</div>

<footer class="page-footer dark">
  <div class="container">
      <div class="row">
          <div class="col-sm-3">
              <h5>Get started</h5>
              <ul>
                  <li><a href="#">Home</a></li>
                  <li><a href="#">Login</a></li>
              </ul>
          </div>
          <div class="col-sm-3">
              <h5>About us</h5>
              <ul>
                  <li><a href="#">Contact us</a></li>
              </ul>
          </div>
      </div>
  </div>
</footer>
<script src="js/build/codeVendor.js"></script>
<script src="js/build/codeMain.js"></script>
<script>
  window.onload = ()=>{
    console.log(window.name)
    fetch("http://localhost:5000/contest/id/"+window.name)
    .then(res => res.json())
    .then(contest=>{
      let html ='<br><br><br><h2 id="contestName">'+ contest.contestID + ' - ' + contest.name+'</h2>' +
          '    <p id="contestDescription">'+contest.description+'</p>' +
          '    <div class="container">'
      if(contest.organizer)
        html+='<strong>Organizer: </strong>'+contest.organizer.firstName+contest.organizer.lastName
      html+= '      <br>' +
          '      <strong>Contest Start Time: </strong>'+new Date(contest.contestStartTime).toLocaleString("en-IN")+
          '      <br>' +
          '      <strong>Contest End Time: </strong>'+ new Date(contest.contestEndTime).toLocaleString("en-IN") +
          '    </div>' +
          '    <br>' +
          '    <table class="table">' +
          '      <thead class="thead-dark">' +
          '      <tr>' +
          '        <th scope="col">#</th>' +
          '        <th scope="col">Problem Name</th>' +
          '        <th scope="col">Points</th>' +
          '        <th scope="col">Author</th>' +
          '      </tr>' +
          '      </thead>' +
          '      <tbody>'

      contest.problems.map((problem, index)=>{
        html+='      <tr>' +
            '        <th scope="row">'+(index+1)+'</th>' +
            '        <td><a onclick=openNewTab(\'viewProblem.html\',"'+problem.problemObject._id+"&"+contest.contestID+'")>'+problem.problemObject.name+'</a></td>' +
            '        <td>'+ problem.points +'</td>'
        if(problem.problemObject.authors.length>0)
          html+=
            '        <td'+ problem.problemObject.authors +'</td>'
        else
          html+=
            '        <td>Test Author</td>'
      })
      html+=
          '      </tr>' +
          '      </tbody>' +
          '    </table>'

      $('#contest').append(html)
    })
  }

</script>
<script
    src="https://code.jquery.com/jquery-3.5.1.js"
    integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha512-dqw6X88iGgZlTsONxZK9ePmJEFrmHwpuMrsUChjAw1mRUhUITE5QU9pkcSox+ynfLhL15Sv2al5A0LVyDCmtUw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</body>
</html>