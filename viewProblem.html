<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Problem Statement</title>
        <link
            rel="stylesheet"
            href="../assets/bootstrap/css/bootstrap.min.css"
        />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700,700i,600,600i"
        />
        <link rel="stylesheet" href="../assets/fonts/ionicons.min.css" />
        <link rel="stylesheet" href="../css/Contact-Form-Clean.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.css"
        />
        <link rel="stylesheet" href="../css/vanilla-zoom.min.css" />
    </head>
    <body>
        <div id="problem"></div>
    </body>
    <script src="js/build/codeVendor.js"></script>
    <script src="js/build/codeMain.js"></script>

    <script>
        function escapeHtml(string) {
            let entityMap = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#39;',
                '/': '&#x2F;',
                '`': '&#x60;',
                '=': '&#x3D;',
            }
            return String(string).replace(/[&<>"'`=\/]/g, function (s) {
                return entityMap[s]
            })
        }

        window.onload = () => {
            let contestId='', problemId=''
            if(window.name.split("&").length>1){
                contestId=window.name.split("&")[1]
                problemId=window.name.split("&")[0]
            }
            else problemId=window.name
            fetch('http://localhost:5000/problems/' + problemId)
                .then((response) => response.json())
                .then((x) => {
                    let html =
                        '<main class="page"><section class="clean-block features"><div class="container"><div class="block-heading"><h2 class="text-info">' +
                        x.name +
                        '</h2></div></div><div class="container"><div class = "row"><div class="col-md-8"><h4 style="color: var(--bs-info);">Problem Description</h4><p>' +
                        x.problemStatement +
                        '</p><h4 style="color: var(--bs-info);">Constraints</h4>'
                    x.constraints.map((y) => {
                        html += '<p>' + escapeHtml(y) + '</p>'
                    })

                    html +=
                        '</div><div class = "col-md-4"><h6 style="color: var(--bs-info);">Time Limit</h6><p>' +
                        x.timeLimit +
                        '</p><h6 style="color: var(--bs-info);">Memory Limit</h6><p>' +
                        x.memoryLimit +
                        '</p><h6 style="color: var(--bs-info);">Problem Type</h6>'
                    x.problemType.map((y) => {
                        html += '<p>' + escapeHtml(y) + '</p>'
                    })

                    html +=
                        '</div></div></div> <div class="container"><div class="row"><div class="col-md-6"><h4 style="color: var(--bs-info);">Sample Input</h4>'
                    x.sampleInput.map((y) => {
                        html += '<p>' + escapeHtml(y) + '</p>'
                    })
                    html +=
                        '</div><div class="col-md-6"><h4 style="color: var(--bs-info);">Sample Output</h4>'
                    x.sampleOutput.map((y) => {
                        html += '<p>' + escapeHtml(y) + '</p>'
                    })
                    html +=
                        '</div></div></div><div class="container"><div class="row"><div class="col-md-12"><h4 style="color: var(--bs-info);">Explanation</h4><p>' +
                        x.explanation +
                        '</p></div></div></div></section></main>'
                    $('#problem').append(html)
                    if(contestId!==''){
                        $("#problem").append('<button id="submit">Submit answer</button>')
                        $('#submit').click(() => {
                            openNewTab('index.html', `${window.name}IDE`)
                        })
                    }

                })
        }
    </script>
</html>
