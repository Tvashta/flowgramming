<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Problem Statement</title>
    </head>
    <body>
        <div id="problem"></div>
    </body>
    <script src="js/build/codeVendor.js"></script>
    <script src="js/build/codeMain.js"></script>
    <script>
        window.onload = () => {
            let contestId='', problemId=''
            if(window.name.split("&").length>1){
                contestId=window.name.split("&")[1]
                problemId=window.name.split("&")[0]
            }
            else problemId=window.name
            fetch('http://localhost:5000/problems/' + problemId)
                .then((response) => response.json())
                .then((x) => {
                    let html =
                        '<h1>' +
                        x.name +
                        '</h1>' +
                        '<p>' +
                        x.problemStatement +
                        '</p><p>Constraints:</p>'
                    x.constraints.map((y) => {
                        html += '<p>' + escapeHtml(y) + '</p>'
                    })
                    html += '<p>Sample Input</p>'
                    x.sampleInput.map((y) => {
                        html += '<p>' + escapeHtml(y) + '</p>'
                    })
                    html += '<p>Sample Output</p>'
                    x.sampleOutput.map((y) => {
                        html += '<p>' + escapeHtml(y) + '</p>'
                    })
                    html +=
                        '<p>Explanation</p><p>' +
                        x.explanation +
                        '</p>' +
                        '<p>Time Limit</p><p>' +
                        x.timeLimit +
                        '</p><p>Memory Limit</p><p>' +
                        x.memoryLimit +
                        '</p><p>Problem Type</p>'
                    x.problemType.map((y) => {
                        html += '<p>' + escapeHtml(y) + '</p>'
                    })
                    $('#problem').append(html)
                    if(contestId!==''){
                        $("#problem").append('<button id="submit">Submit answer</button>')
                        $('#submit').click(() => {
                            openNewTab('index.html', `${window.name}IDE`)
                        })
                    }

                })
        }

    </script>
</html>
